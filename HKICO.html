<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luy·ªán thi HKICO Scratch 2026 - C√≥ ch·∫•m ƒëi·ªÉm</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f8ff; margin: 0; padding: 20px; min-height: 100vh; display: flex; justify-content: center; align-items: center; }
        .container { background: white; width: 100%; max-width: 800px; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border-top: 10px solid #FFAB19; position: relative; }
        
        /* M√†n h√¨nh nh·∫≠p t√™n */
        #start-screen { text-align: center; }
        input[type="text"] { padding: 15px; width: 80%; font-size: 1.2em; border: 2px solid #ddd; border-radius: 8px; margin: 20px 0; outline: none; }
        input[type="text"]:focus { border-color: #4D97FF; }
        .btn-start { background-color: #4D97FF; color: white; padding: 15px 40px; font-size: 1.2em; border: none; border-radius: 8px; cursor: pointer; transition: 0.3s; }
        .btn-start:hover { background-color: #3373cc; }

        /* Header th√¥ng tin */
        .header-bar { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; font-weight: bold; color: #555; }
        .timer { color: #dc3545; font-size: 1.2em; display: flex; align-items: center; gap: 5px; }

        /* C√¢u h·ªèi */
        h1 { text-align: center; color: #4D97FF; margin-top: 0; }
        .question { font-size: 1.3em; font-weight: bold; margin-bottom: 20px; color: #333; line-height: 1.5; }
        .options { display: grid; gap: 12px; }
        .btn-opt { padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px; background: #fff; cursor: pointer; text-align: left; font-size: 1.05em; transition: 0.2s; position: relative; }
        .btn-opt:hover { background-color: #f9f9f9; border-color: #4D97FF; }
        
        /* Tr·∫°ng th√°i ƒë√∫ng sai (khi ƒëang l√†m) */
        .btn-opt.correct { background-color: #d4edda; border-color: #28a745; color: #155724; }
        .btn-opt.wrong { background-color: #f8d7da; border-color: #dc3545; color: #721c24; }
        .btn-opt:disabled { cursor: default; }

        .feedback { margin-top: 20px; padding: 15px; border-radius: 8px; background-color: #e2e3e5; display: none; border-left: 5px solid #666; }
        
        .next-btn { display: none; width: 100%; padding: 15px; background-color: #FFAB19; color: white; border: none; border-radius: 10px; font-size: 1.2em; margin-top: 20px; cursor: pointer; font-weight: bold; }
        .next-btn:hover { background-color: #e09200; }

        /* M√†n h√¨nh k·∫øt qu·∫£ & Xem l·∫°i */
        #result-screen { text-align: center; display: none; }
        .score-box { font-size: 3em; font-weight: bold; color: #FFAB19; margin: 10px 0; }
        .review-container { text-align: left; margin-top: 30px; border-top: 2px dashed #ccc; padding-top: 20px; max-height: 500px; overflow-y: auto; }
        .review-item { background: #fff5f5; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #ffcccc; }
        .review-q { font-weight: bold; margin-bottom: 10px; color: #333; }
        .review-your-ans { color: #dc3545; font-weight: bold; }
        .review-correct-ans { color: #28a745; font-weight: bold; }
        .review-explain { font-style: italic; color: #555; margin-top: 5px; font-size: 0.9em; }
        
        .restart-btn { padding: 15px 30px; background-color: #28a745; color: white; border: none; border-radius: 8px; font-size: 1.2em; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <div id="start-screen">
        <h1>Ch√†o m·ª´ng ƒë·∫øn v·ªõi b√†i thi th·ª≠ HKICO</h1>
        <p>Vui l√≤ng nh·∫≠p h·ªç v√† t√™n c·ªßa con ƒë·ªÉ b·∫Øt ƒë·∫ßu.</p>
        <input type="text" id="username" placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn An - L·ªõp 3A">
        <br>
        <button class="btn-start" onclick="startQuiz()">B·∫Øt ƒë·∫ßu l√†m b√†i thi</button>
    </div>

    <div id="quiz-screen" style="display: none;">
        <div class="header-bar">
            <span id="display-name">Th√≠ sinh: ...</span>
            <span class="timer">‚è± <span id="time-left">30:00</span></span>
        </div>
        
        <div class="progress" style="text-align: right; color: #888; margin-bottom: 10px;">
            C√¢u h·ªèi <span id="current-q">1</span> / 30
        </div>

        <div class="question" id="question-text">Loading...</div>
        <div class="options" id="options-container"></div>
        <div class="feedback" id="feedback-text"></div>
        <button class="next-btn" id="next-button" onclick="nextQuestion()">C√¢u ti·∫øp theo ‚ûú</button>
    </div>

    <div id="result-screen">
        <h1>K·∫øt qu·∫£ b√†i thi</h1>
        <p>Th√≠ sinh: <strong id="result-name"></strong></p>
        <p>Th·ªùi gian ho√†n th√†nh: <span id="time-taken"></span></p>
        <div class="score-box"><span id="final-score">0</span> / 30</div>
        <p id="result-msg"></p>
        
        <div id="review-area" class="review-container" style="display: none;">
            <h3>üîç Xem l·∫°i c√°c c√¢u l√†m sai:</h3>
            <div id="wrong-answers-list"></div>
        </div>

        <button class="restart-btn" onclick="location.reload()">L√†m l·∫°i b√†i thi m·ªõi</button>
    </div>
</div>

<script>
    // D·ªØ li·ªáu c√¢u h·ªèi (Gi·ªØ nguy√™n b·ªô 30 c√¢u)
    const questions = [
        { q: "1. Who developed Scratch? (Ai l√† ng∆∞·ªùi ph√°t tri·ªÉn Scratch?)", a: ["Bill Gates", "Steve Jobs", "Mitchel Resnick", "Mark Zuckerberg"], correct: 2, explain: "Mitchel Resnick (nh√≥m Lifelong Kindergarten t·∫°i MIT) ƒë√£ t·∫°o ra Scratch." },
        { q: "2. Which area shows how your project runs? (Khu v·ª±c n√†o hi·ªÉn th·ªã c√°ch d·ª± √°n ho·∫°t ƒë·ªông?)", a: ["Script Area", "Block Palette", "Stage (S√¢n kh·∫•u)", "Sprite Pane"], correct: 2, explain: "Stage (S√¢n kh·∫•u) l√† n∆°i hi·ªÉn th·ªã k·∫øt qu·∫£ h√¨nh ·∫£nh." },
        { q: "3. Dimensions of the Scratch Stage? (K√≠ch th∆∞·ªõc S√¢n kh·∫•u Scratch?)", a: ["480 x 360", "360 x 480", "100 x 100", "Unlimited"], correct: 0, explain: "R·ªông 480 (X: -240 ƒë·∫øn 240) v√† Cao 360 (Y: -180 ƒë·∫øn 180)." },
        { q: "4. Block sets position instantly? (Kh·ªëi ƒë·∫∑t v·ªã tr√≠ t·ª©c th·ªùi?)", a: ["Glide to x:0 y:0", "Go to x: 0 y: 0", "Move 10 steps", "Change x by 10"], correct: 1, explain: "'Go to' d·ªãch chuy·ªÉn t·ª©c th·ªùi, 'Glide' t·ªën th·ªùi gian di chuy·ªÉn." },
        { q: "5. (0,0), Face 90, Move 10. New pos? (·ªû (0,0), H∆∞·ªõng 90, ƒêi 10. V·ªã tr√≠ m·ªõi?)", a: ["(0, 10)", "(10, 0)", "(-10, 0)", "(0, -10)"], correct: 1, explain: "H∆∞·ªõng 90 l√† b√™n Ph·∫£i, tƒÉng X l√™n 10 -> (10, 0)." },
        { q: "6. Prevent flipping upside down? (NgƒÉn b·ªã l·ªôn ng∆∞·ª£c?)", a: ["Point in direction", "Set rotation style [left-right]", "If on edge, bounce", "Turn 15 degrees"], correct: 1, explain: "'Set rotation style left-right' gi·ªØ nh√¢n v·∫≠t lu√¥n ƒë·ª©ng th·∫≥ng." },
        { q: "7. Diff between 'Say' and 'Say for 2s'? (Kh√°c nhau gi·ªØa 'N√≥i' v√† 'N√≥i trong 2s'?)", a: ["No diff", "1st disappears", "1st stays forever", "1st makes sound"], correct: 2, explain: "'Say' gi·ªØ l·ªùi tho·∫°i m√£i, 'Say for...' s·∫Ω bi·∫øn m·∫•t sau th·ªùi gian quy ƒë·ªãnh." },
        { q: "8. Change appearance? (ƒê·ªïi v·∫ª ngo√†i?)", a: ["Backdrops", "Costumes", "Sounds", "Loops"], correct: 1, explain: "Costumes (Trang ph·ª•c) l√† c√°c h√¨nh ·∫£nh kh√°c nhau c·ªßa nh√¢n v·∫≠t." },
        { q: "9. Looks category block? (Kh·ªëi thu·ªôc nh√≥m Hi·ªÉn th·ªã?)", a: ["Move", "Play sound", "Next costume", "Wait"], correct: 2, explain: "Next costume (Trang ph·ª•c k·∫ø ti·∫øp) thu·ªôc nh√≥m Looks (M√†u t√≠m)." },
        { q: "10. Hat block to start? (Kh·ªëi m≈© b·∫Øt ƒë·∫ßu?)", a: ["Move", "When green flag clicked", "Wait", "Stop all"], correct: 1, explain: "Kh·ªëi 'Khi b·∫•m c·ªù xanh' d√πng ƒë·ªÉ b·∫Øt ƒë·∫ßu k·ªãch b·∫£n." },
        { q: "11. Repeat 4 [ Repeat 2 [ Say Hello ] ]. Total? (T·ªïng s·ªë l·∫ßn?)", a: ["4", "2", "6", "8"], correct: 3, explain: "V√≤ng l·∫∑p l·ªìng nhau nh√¢n l√™n: 4 x 2 = 8 l·∫ßn." },
        { q: "12. Stop script forever? (D·ª´ng m√£i m√£i?)", a: ["Wait until", "Stop [all]", "Delete clone", "Forever"], correct: 1, explain: "Stop all k·∫øt th√∫c to√†n b·ªô ch∆∞∆°ng tr√¨nh." },
        { q: "13. 'Broadcast' used for? ('Ph√°t tin' d√πng ƒë·ªÉ?)", a: ["Music", "Message to sprites", "Moving", "Drawing"], correct: 1, explain: "G·ª≠i t√≠n hi·ªáu th√¥ng b√°o ƒë·ªÉ c√°c nh√¢n v·∫≠t kh√°c c√πng h√†nh ƒë·ªông." },
        { q: "14. Shape for boolean? (H√¨nh d·∫°ng kh·ªëi Logic?)", a: ["Rectangle", "Hexagon (L·ª•c gi√°c)", "Oval", "Circle"], correct: 1, explain: "Kh·ªëi l·ª•c gi√°c (6 c·∫°nh) d√πng cho ƒëi·ªÅu ki·ªán ƒê√∫ng/Sai." },
        { q: "15. 'Pick random 1 to 10'? (K·∫øt qu·∫£ ng·∫´u nhi√™n?)", a: ["Always 1", "Always 10", "Any integer 1-10", "5.5"], correct: 2, explain: "Ch·ªçn b·∫•t k·ª≥ s·ªë nguy√™n n√†o trong kho·∫£ng t·ª´ 1 ƒë·∫øn 10." },
        { q: "16. 'If touching color Red'? (ƒêi·ªÅu ki·ªán ch·∫°m m√†u?)", a: ["Operators", "Sensing > Touching color?", "Looks", "Pen"], correct: 1, explain: "Touching color n·∫±m trong nh√≥m Sensing (C·∫£m bi·∫øn)." },
        { q: "17. 'Mouse x' reports? ('Mouse x' b√°o c√°o?)", a: ["Speed", "Horizontal position", "Vertical position", "Clicked"], correct: 1, explain: "X lu√¥n ƒë·∫°i di·ªán cho tr·ª•c ngang (Horizontal)." },
        { q: "18. What is a Variable? (Bi·∫øn l√† g√¨?)", a: ["Value changes", "Movement", "Costume", "Fixed number"], correct: 0, explain: "Bi·∫øn l√† n∆°i l∆∞u tr·ªØ gi√° tr·ªã c√≥ th·ªÉ thay ƒë·ªïi (ƒëi·ªÉm, th·ªùi gian...)." },
        { q: "19. Increase Score by 1? (TƒÉng ƒëi·ªÉm th√™m 1?)", a: ["Set Score to 1", "Change Score by 1", "Set Score to 0", "Show var"], correct: 1, explain: "'Change by' d√πng ƒë·ªÉ c·ªông th√™m, 'Set to' l√† ƒë·∫∑t l·∫°i gi√° tr·ªã m·ªõi." },
        { q: "20. Variable scope? (Ph·∫°m vi bi·∫øn?)", a: ["Never seen", "Can be 'For all sprites'", "Only Cat", "Only Stage"], correct: 1, explain: "C√≥ th·ªÉ ch·ªçn 'For all sprites' (To√†n c·ª•c) ƒë·ªÉ m·ªçi nh√¢n v·∫≠t ƒë·ªÅu d√πng ƒë∆∞·ª£c." },
        { q: "21. 'Pen Down' does what? ('ƒê·∫∑t b√∫t' l√†m g√¨?)", a: ["Stop", "Draw trail", "Lift pen", "Erase"], correct: 1, explain: "Khi nh√¢n v·∫≠t di chuy·ªÉn s·∫Ω ƒë·ªÉ l·∫°i n√©t v·∫Ω tr√™n s√¢n kh·∫•u." },
        { q: "22. Use Pen in Scratch 3.0? (D√πng B√∫t trong Scratch 3.0?)", a: ["Plugin", "Add Extension", "Buy pro", "Impossible"], correct: 1, explain: "Ph·∫£i nh·∫•n n√∫t 'Add Extension' (M·ªü r·ªông) ·ªü g√≥c d∆∞·ªõi c√πng b√™n tr√°i." },
        { q: "23. Forever -> Move -> Bounce? (Li√™n t·ª•c -> ƒêi -> B·∫≠t l·∫°i?)", a: ["Stops", "Moves back and forth", "Spins", "Disappears"], correct: 1, explain: "Nh√¢n v·∫≠t di chuy·ªÉn qua l·∫°i li√™n t·ª•c trong s√¢n kh·∫•u." },
        { q: "24. Set x 0, Change 10, Change -10. Final? (K·∫øt qu·∫£?)", a: ["10", "20", "0", "-10"], correct: 2, explain: "0 + 10 - 10 = 0." },
        { q: "25. Delete a block? (X√≥a kh·ªëi l·ªánh?)", a: ["Drag to Palette", "Duplicate", "Double click", "Spacebar"], correct: 0, explain: "K√©o th·∫£ kh·ªëi l·ªánh ng∆∞·ª£c v·ªÅ kho b√™n tr√°i ƒë·ªÉ x√≥a." },
        { q: "26. Green Flag used to? (C·ªù xanh d√πng ƒë·ªÉ?)", a: ["Stop", "Delete", "Start program", "Change bg"], correct: 2, explain: "C·ªù xanh l√† n√∫t B·∫Øt ƒë·∫ßu ch·∫°y ch∆∞∆°ng tr√¨nh." },
        { q: "27. Block waits input? (Kh·ªëi ƒë·ª£i nh·∫≠p li·ªáu?)", a: ["Say", "Ask ... and wait", "Broadcast", "Wait"], correct: 1, explain: "Kh·ªëi 'Ask' hi·ªán khung nh·∫≠p li·ªáu v√† d·ª´ng ch∆∞∆°ng tr√¨nh ch·ªù ng∆∞·ªùi d√πng g√µ." },
        { q: "28. Answer stored where? (C√¢u tr·∫£ l·ªùi l∆∞u ·ªü ƒë√¢u?)", a: ["Var Score", "Var 'Answer'", "Nowhere", "Stage"], correct: 1, explain: "L∆∞u trong bi·∫øn c√≥ s·∫µn t√™n l√† 'Answer' (Tr·∫£ l·ªùi) thu·ªôc nh√≥m C·∫£m bi·∫øn." },
        { q: "29. 'NOT touching mouse'? (KH√îNG ch·∫°m chu·ªôt?)", a: ["Touching", "Does NOT touch", "Clicked", "Never"], correct: 1, explain: "NOT ƒë·∫£o ng∆∞·ª£c ƒëi·ªÅu ki·ªán. ƒêang ch·∫°m s·∫Ω th√†nh Sai, Kh√¥ng ch·∫°m th√†nh ƒê√∫ng." },
        { q: "30. NOT a category? (KH√îNG ph·∫£i nh√≥m l·ªánh?)", a: ["Motion", "Flying", "Looks", "Sensing"], correct: 1, explain: "Kh√¥ng c√≥ nh√≥m 'Flying' trong Scratch." }
    ];

    // C√°c bi·∫øn to√†n c·ª•c
    let currentQ = 0;
    let score = 0;
    let userName = "";
    let timeLeft = 30 * 60; // 30 ph√∫t t√≠nh b·∫±ng gi√¢y
    let timerInterval;
    let wrongAnswersLog = []; // L∆∞u l·∫°i c√°c c√¢u sai ƒë·ªÉ xem l·∫°i

    // H√†m b·∫Øt ƒë·∫ßu
    function startQuiz() {
        const inputName = document.getElementById("username").value;
        if(inputName.trim() === "") {
            alert("Vui l√≤ng nh·∫≠p t√™n c·ªßa con ƒë·ªÉ b·∫Øt ƒë·∫ßu nh√©!");
            return;
        }
        userName = inputName;
        document.getElementById("display-name").innerText = "Th√≠ sinh: " + userName;
        
        // Chuy·ªÉn m√†n h√¨nh
        document.getElementById("start-screen").style.display = "none";
        document.getElementById("quiz-screen").style.display = "block";
        
        loadQuestion();
        startTimer();
    }

    // ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c
    function startTimer() {
        timerInterval = setInterval(() => {
            timeLeft--;
            let m = Math.floor(timeLeft / 60);
            let s = timeLeft % 60;
            // Th√™m s·ªë 0 ƒë·∫±ng tr∆∞·ªõc n·∫øu nh·ªè h∆°n 10
            m = m < 10 ? "0" + m : m;
            s = s < 10 ? "0" + s : s;
            document.getElementById("time-left").innerText = `${m}:${s}`;

            if(timeLeft <= 0) {
                clearInterval(timerInterval);
                finishQuiz(true); // H·∫øt gi·ªù t·ª± n·ªôp
            }
        }, 1000);
    }

    // T·∫£i c√¢u h·ªèi
    function loadQuestion() {
        const qData = questions[currentQ];
        document.getElementById("current-q").innerText = currentQ + 1;
        document.getElementById("question-text").innerText = qData.q;
        
        const optionsDiv = document.getElementById("options-container");
        optionsDiv.innerHTML = "";
        document.getElementById("feedback-text").style.display = "none";
        document.getElementById("next-button").style.display = "none";

        qData.a.forEach((ans, index) => {
            const btn = document.createElement("button");
            btn.className = "btn-opt";
            btn.innerText = ans;
            btn.onclick = () => checkAnswer(index, btn);
            optionsDiv.appendChild(btn);
        });
    }

    // Ki·ªÉm tra ƒë√°p √°n
    function checkAnswer(selectedIndex, btnElement) {
        const qData = questions[currentQ];
        const allBtns = document.querySelectorAll(".options .btn-opt");
        
        allBtns.forEach(btn => btn.disabled = true); // Kh√≥a n√∫t

        const feedback = document.getElementById("feedback-text");
        feedback.style.display = "block";

        if(selectedIndex === qData.correct) {
            btnElement.classList.add("correct");
            score++;
            feedback.innerHTML = "<strong>‚úÖ Ch√≠nh x√°c!</strong><br>" + qData.explain;
            feedback.style.borderColor = "#28a745";
            feedback.style.backgroundColor = "#d4edda";
            feedback.style.color = "#155724";
        } else {
            btnElement.classList.add("wrong");
            allBtns[qData.correct].classList.add("correct"); // Hi·ªán ƒë√°p √°n ƒë√∫ng
            feedback.innerHTML = "<strong>‚ùå Sai r·ªìi!</strong><br>" + qData.explain;
            feedback.style.borderColor = "#dc3545";
            feedback.style.backgroundColor = "#f8d7da";
            feedback.style.color = "#721c24";

            // L∆∞u v√†o log c√¢u sai
            wrongAnswersLog.push({
                qIndex: currentQ,
                selected: selectedIndex,
                correct: qData.correct
            });
        }

        document.getElementById("next-button").style.display = "block";
    }

    // Chuy·ªÉn c√¢u
    function nextQuestion() {
        currentQ++;
        if(currentQ < questions.length) {
            loadQuestion();
        } else {
            finishQuiz(false);
        }
    }

    // K·∫øt th√∫c v√† Hi·ªÉn th·ªã k·∫øt qu·∫£
    function finishQuiz(isTimeout) {
        clearInterval(timerInterval); // D·ª´ng ƒë·ªìng h·ªì
        document.getElementById("quiz-screen").style.display = "none";
        document.getElementById("result-screen").style.display = "block";
        
        document.getElementById("result-name").innerText = userName;
        document.getElementById("final-score").innerText = score;

        // T√≠nh th·ªùi gian ƒë√£ l√†m
        let timeSpent = (30 * 60) - timeLeft;
        let m = Math.floor(timeSpent / 60);
        let s = timeSpent % 60;
        document.getElementById("time-taken").innerText = `${m} ph√∫t ${s} gi√¢y`;

        let msg = "";
        if(isTimeout) msg += "(H·∫øt gi·ªù l√†m b√†i!) <br>";
        
        if(score === 30) msg += "Xu·∫•t s·∫Øc! B·∫°n ƒë√£ ƒë√∫ng tuy·ªát ƒë·ªëi!";
        else if(score >= 25) msg += "R·∫•t t·ªët! Ki·∫øn th·ª©c c·ªßa b·∫°n r·∫•t v·ªØng.";
        else if(score >= 15) msg += "C·∫ßn c·ªë g·∫Øng √¥n luy·ªán th√™m c√°c ph·∫ßn sai nh√©.";
        else msg += "H√£y xem l·∫°i l√Ω thuy·∫øt v√† l√†m l·∫°i b√†i nh√©.";
        
        document.getElementById("result-msg").innerHTML = msg;

        // Hi·ªÉn th·ªã ph·∫ßn xem l·∫°i c√¢u sai
        if(wrongAnswersLog.length > 0) {
            const reviewArea = document.getElementById("review-area");
            const listDiv = document.getElementById("wrong-answers-list");
            reviewArea.style.display = "block";
            
            wrongAnswersLog.forEach(item => {
                const q = questions[item.qIndex];
                const div = document.createElement("div");
                div.className = "review-item";
                div.innerHTML = `
                    <div class="review-q">${q.q}</div>
                    <div>B·∫°n ch·ªçn: <span class="review-your-ans">${q.a[item.selected]}</span></div>
                    <div>ƒê√°p √°n ƒë√∫ng: <span class="review-correct-ans">${q.a[item.correct]}</span></div>
                    <div class="review-explain">üí° ${q.explain}</div>
                `;
                listDiv.appendChild(div);
            });
        }
    }

</script>

</body>
</html>